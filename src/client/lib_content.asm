; Listing generated by Microsoft (R) Optimizing Compiler Version 19.23.28107.0 

	TITLE	C:\Program Files (x86)\Steam\steamapps\common\Bully Scholarship Edition\_derpy_script_loader\src\client\library\lib_content.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	_dslopen_content
PUBLIC	??_C@_0BG@IEJFEJMI@allow_img_replacement@	; `string'
PUBLIC	??_C@_0CD@JAEKCEEJ@_derpy_script_loader?1cache?1Act?4@ ; `string'
PUBLIC	??_C@_0M@NJIGANIF@Act?1Act?4img@		; `string'
PUBLIC	??_C@_0CE@GJDINDKL@_derpy_script_loader?1cache?1Cuts@ ; `string'
PUBLIC	??_C@_0O@IOMPOKDP@Cuts?1Cuts?4img@		; `string'
PUBLIC	??_C@_0CH@FPHBLACB@_derpy_script_loader?1cache?1Trig@ ; `string'
PUBLIC	??_C@_0BA@KLEHNHEH@DAT?1Trigger?4img@		; `string'
PUBLIC	??_C@_0CD@LHPELCBK@_derpy_script_loader?1cache?1ide?4@ ; `string'
PUBLIC	??_C@_0BA@PPFHMAPH@Objects?1ide?4img@		; `string'
PUBLIC	??_C@_0CH@CPJGJPMF@_derpy_script_loader?1cache?1Scri@ ; `string'
PUBLIC	??_C@_0BE@CGMMJKCJ@Scripts?1Scripts?4img@	; `string'
PUBLIC	??_C@_0BI@PPKKMKAK@allow_world_replacement@	; `string'
PUBLIC	??_C@_0CF@ONGGAMNM@_derpy_script_loader?1cache?1Worl@ ; `string'
PUBLIC	??_C@_0BB@EJOKGLAP@Stream?1World?4img@		; `string'
PUBLIC	??_C@_07MCIBIGGD@ACT?4IMG@			; `string'
PUBLIC	??_C@_08OBDINPEP@CUTS?4IMG@			; `string'
PUBLIC	??_C@_0M@GIGDAHPH@TRIGGER?4IMG@			; `string'
PUBLIC	??_C@_07BMEJHCGG@IDE?4IMG@			; `string'
PUBLIC	??_C@_0M@BIIECIBD@SCRIPTS?4IMG@			; `string'
PUBLIC	??_C@_09BJGACECB@WORLD?4IMG@			; `string'
PUBLIC	??_C@_0CD@NGOGGFFH@unknown?5or?5unsupported?5img?5arch@ ; `string'
PUBLIC	??_C@_0BP@MFAKBPDH@too?5late?5to?5replace?5game?5files@ ; `string'
PUBLIC	??_C@_0BG@IPGBEPPI@no?5DSL?5script?5running@	; `string'
PUBLIC	??_C@_0BM@GHHNBMOK@failed?5to?5replace?5game?5file@ ; `string'
PUBLIC	??_C@_0BA@DJEIEDNO@RebuildArchives@		; `string'
PUBLIC	??_C@_0BB@DPOKAIPC@RegisterGameFile@		; `string'
EXTRN	_lua_tostring:PROC
EXTRN	_lua_pushstring:PROC
EXTRN	_lua_pushcclosure:PROC
EXTRN	_lua_settable:PROC
EXTRN	_luaL_argerror:PROC
EXTRN	_luaL_checktype:PROC
EXTRN	_luaL_error:PROC
EXTRN	_getDslState:PROC
EXTRN	_dslisenum:PROC
EXTRN	_getConfigBooleanArray:PROC
EXTRN	_addContentFile:PROC
EXTRN	_makeArchiveWithContent:PROC
;	COMDAT ??_C@_0BB@DPOKAIPC@RegisterGameFile@
CONST	SEGMENT
??_C@_0BB@DPOKAIPC@RegisterGameFile@ DB 'RegisterGameFile', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@DJEIEDNO@RebuildArchives@
CONST	SEGMENT
??_C@_0BA@DJEIEDNO@RebuildArchives@ DB 'RebuildArchives', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BM@GHHNBMOK@failed?5to?5replace?5game?5file@
CONST	SEGMENT
??_C@_0BM@GHHNBMOK@failed?5to?5replace?5game?5file@ DB 'failed to replace'
	DB	' game file', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@IPGBEPPI@no?5DSL?5script?5running@
CONST	SEGMENT
??_C@_0BG@IPGBEPPI@no?5DSL?5script?5running@ DB 'no DSL script running', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BP@MFAKBPDH@too?5late?5to?5replace?5game?5files@
CONST	SEGMENT
??_C@_0BP@MFAKBPDH@too?5late?5to?5replace?5game?5files@ DB 'too late to r'
	DB	'eplace game files', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CD@NGOGGFFH@unknown?5or?5unsupported?5img?5arch@
CONST	SEGMENT
??_C@_0CD@NGOGGFFH@unknown?5or?5unsupported?5img?5arch@ DB 'unknown or un'
	DB	'supported img archive', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_09BJGACECB@WORLD?4IMG@
CONST	SEGMENT
??_C@_09BJGACECB@WORLD?4IMG@ DB 'WORLD.IMG', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@BIIECIBD@SCRIPTS?4IMG@
CONST	SEGMENT
??_C@_0M@BIIECIBD@SCRIPTS?4IMG@ DB 'SCRIPTS.IMG', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_07BMEJHCGG@IDE?4IMG@
CONST	SEGMENT
??_C@_07BMEJHCGG@IDE?4IMG@ DB 'IDE.IMG', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@GIGDAHPH@TRIGGER?4IMG@
CONST	SEGMENT
??_C@_0M@GIGDAHPH@TRIGGER?4IMG@ DB 'TRIGGER.IMG', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_08OBDINPEP@CUTS?4IMG@
CONST	SEGMENT
??_C@_08OBDINPEP@CUTS?4IMG@ DB 'CUTS.IMG', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_07MCIBIGGD@ACT?4IMG@
CONST	SEGMENT
??_C@_07MCIBIGGD@ACT?4IMG@ DB 'ACT.IMG', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BB@EJOKGLAP@Stream?1World?4img@
CONST	SEGMENT
??_C@_0BB@EJOKGLAP@Stream?1World?4img@ DB 'Stream/World.img', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CF@ONGGAMNM@_derpy_script_loader?1cache?1Worl@
CONST	SEGMENT
??_C@_0CF@ONGGAMNM@_derpy_script_loader?1cache?1Worl@ DB '_derpy_script_l'
	DB	'oader/cache/World.img', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BI@PPKKMKAK@allow_world_replacement@
CONST	SEGMENT
??_C@_0BI@PPKKMKAK@allow_world_replacement@ DB 'allow_world_replacement', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BE@CGMMJKCJ@Scripts?1Scripts?4img@
CONST	SEGMENT
??_C@_0BE@CGMMJKCJ@Scripts?1Scripts?4img@ DB 'Scripts/Scripts.img', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CH@CPJGJPMF@_derpy_script_loader?1cache?1Scri@
CONST	SEGMENT
??_C@_0CH@CPJGJPMF@_derpy_script_loader?1cache?1Scri@ DB '_derpy_script_l'
	DB	'oader/cache/Scripts.img', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@PPFHMAPH@Objects?1ide?4img@
CONST	SEGMENT
??_C@_0BA@PPFHMAPH@Objects?1ide?4img@ DB 'Objects/ide.img', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CD@LHPELCBK@_derpy_script_loader?1cache?1ide?4@
CONST	SEGMENT
??_C@_0CD@LHPELCBK@_derpy_script_loader?1cache?1ide?4@ DB '_derpy_script_'
	DB	'loader/cache/ide.img', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@KLEHNHEH@DAT?1Trigger?4img@
CONST	SEGMENT
??_C@_0BA@KLEHNHEH@DAT?1Trigger?4img@ DB 'DAT/Trigger.img', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CH@FPHBLACB@_derpy_script_loader?1cache?1Trig@
CONST	SEGMENT
??_C@_0CH@FPHBLACB@_derpy_script_loader?1cache?1Trig@ DB '_derpy_script_l'
	DB	'oader/cache/Trigger.img', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@IOMPOKDP@Cuts?1Cuts?4img@
CONST	SEGMENT
??_C@_0O@IOMPOKDP@Cuts?1Cuts?4img@ DB 'Cuts/Cuts.img', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CE@GJDINDKL@_derpy_script_loader?1cache?1Cuts@
CONST	SEGMENT
??_C@_0CE@GJDINDKL@_derpy_script_loader?1cache?1Cuts@ DB '_derpy_script_l'
	DB	'oader/cache/Cuts.img', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@NJIGANIF@Act?1Act?4img@
CONST	SEGMENT
??_C@_0M@NJIGANIF@Act?1Act?4img@ DB 'Act/Act.img', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CD@JAEKCEEJ@_derpy_script_loader?1cache?1Act?4@
CONST	SEGMENT
??_C@_0CD@JAEKCEEJ@_derpy_script_loader?1cache?1Act?4@ DB '_derpy_script_'
	DB	'loader/cache/Act.img', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@IEJFEJMI@allow_img_replacement@
CONST	SEGMENT
??_C@_0BG@IEJFEJMI@allow_img_replacement@ DB 'allow_img_replacement', 00H ; `string'
CONST	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _dslopen_content
_TEXT	SEGMENT
_lua$ = 8						; size = 4
_dslopen_content PROC					; COMDAT
; File C:\Program Files (x86)\Steam\steamapps\common\Bully Scholarship Edition\_derpy_script_loader\src\client\library\lib_content.c
; Line 56
	push	esi
; Line 57
	mov	esi, DWORD PTR _lua$[esp]
	push	1
	push	esi
	call	_getDslState
	add	esp, 8
	test	BYTE PTR [eax+340], 8
	je	SHORT $LN2@dslopen_co
; Line 58
	push	OFFSET ??_C@_0BA@DJEIEDNO@RebuildArchives@
	push	esi
	call	_lua_pushstring
	push	0
	push	OFFSET _RebuildArchives
	push	esi
	call	_lua_pushcclosure
	push	-10001					; ffffd8efH
	push	esi
	call	_lua_settable
	add	esp, 28					; 0000001cH
$LN2@dslopen_co:
; Line 59
	push	OFFSET ??_C@_0BB@DPOKAIPC@RegisterGameFile@
	push	esi
	call	_lua_pushstring
	push	0
	push	OFFSET _RegisterGameFile
	push	esi
	call	_lua_pushcclosure
	push	-10001					; ffffd8efH
	push	esi
	call	_lua_settable
	add	esp, 28					; 0000001cH
; Line 60
	xor	eax, eax
	pop	esi
; Line 61
	ret	0
_dslopen_content ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _RegisterGameFile
_TEXT	SEGMENT
_lua$ = 8						; size = 4
_RegisterGameFile PROC					; COMDAT
; File C:\Program Files (x86)\Steam\steamapps\common\Bully Scholarship Edition\_derpy_script_loader\src\client\library\lib_content.c
; Line 36
	push	ebx
	push	ebp
	push	esi
; Line 41
	mov	esi, DWORD PTR _lua$[esp+8]
	push	edi
	push	4
	push	1
	push	esi
	call	_luaL_checktype
; Line 42
	push	4
	push	2
	push	esi
	call	_luaL_checktype
; Line 43
	push	1
	push	esi
	call	_lua_tostring
	mov	edi, eax
; Line 22
	push	OFFSET ??_C@_07MCIBIGGD@ACT?4IMG@
	push	edi
	call	_dslisenum
	add	esp, 40					; 00000028H
	test	eax, eax
	je	SHORT $LN9@RegisterGa
; Line 23
	xor	edi, edi
	jmp	$LN2@RegisterGa
$LN9@RegisterGa:
; Line 24
	push	OFFSET ??_C@_08OBDINPEP@CUTS?4IMG@
	push	edi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN10@RegisterGa
; Line 25
	mov	edi, 1
	jmp	SHORT $LN2@RegisterGa
$LN10@RegisterGa:
; Line 26
	push	OFFSET ??_C@_0M@GIGDAHPH@TRIGGER?4IMG@
	push	edi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN11@RegisterGa
; Line 27
	mov	edi, 2
	jmp	SHORT $LN2@RegisterGa
$LN11@RegisterGa:
; Line 28
	push	OFFSET ??_C@_07BMEJHCGG@IDE?4IMG@
	push	edi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN12@RegisterGa
; Line 29
	mov	edi, 3
	jmp	SHORT $LN2@RegisterGa
$LN12@RegisterGa:
; Line 30
	push	OFFSET ??_C@_0M@BIIECIBD@SCRIPTS?4IMG@
	push	edi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN13@RegisterGa
; Line 31
	mov	edi, 4
	jmp	SHORT $LN2@RegisterGa
$LN13@RegisterGa:
; Line 32
	push	OFFSET ??_C@_09BJGACECB@WORLD?4IMG@
	push	edi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN14@RegisterGa
; Line 33
	mov	edi, 5
	jmp	SHORT $LN2@RegisterGa
$LN14@RegisterGa:
; Line 45
	push	OFFSET ??_C@_0CD@NGOGGFFH@unknown?5or?5unsupported?5img?5arch@
	push	1
	push	esi
; Line 34
	or	edi, -1
; Line 45
	call	_luaL_argerror
	add	esp, 12					; 0000000cH
$LN2@RegisterGa:
; Line 46
	push	1
	push	esi
	call	_getDslState
	mov	ebp, eax
	add	esp, 8
; Line 47
	cmp	DWORD PTR [ebp+16], 0
	jne	SHORT $LN3@RegisterGa
; Line 48
	push	OFFSET ??_C@_0BP@MFAKBPDH@too?5late?5to?5replace?5game?5files@
	push	esi
	call	_luaL_error
	add	esp, 8
$LN3@RegisterGa:
; Line 49
	mov	eax, DWORD PTR [ebp+32]
	mov	ebx, DWORD PTR [eax+12]
; Line 50
	test	ebx, ebx
	jne	SHORT $LN4@RegisterGa
; Line 51
	push	OFFSET ??_C@_0BG@IPGBEPPI@no?5DSL?5script?5running@
	push	esi
	call	_luaL_error
	add	esp, 8
$LN4@RegisterGa:
; Line 52
	cmp	DWORD PTR [ebx+8], 0
	je	SHORT $LN6@RegisterGa
	push	2
	push	esi
	call	_lua_tostring
	push	eax
	push	edi
	push	DWORD PTR [ebx+8]
	push	DWORD PTR [ebp+16]
	call	_addContentFile
	add	esp, 24					; 00000018H
	test	eax, eax
	jne	SHORT $LN18@RegisterGa
$LN6@RegisterGa:
; Line 53
	push	OFFSET ??_C@_0BM@GHHNBMOK@failed?5to?5replace?5game?5file@
	push	esi
	call	_luaL_error
	add	esp, 8
$LN18@RegisterGa:
; Line 55
	pop	edi
	pop	esi
	pop	ebp
	xor	eax, eax
	pop	ebx
	ret	0
_RegisterGameFile ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _getContentIdentifier
_TEXT	SEGMENT
_name$ = 8						; size = 4
_getContentIdentifier PROC				; COMDAT
; File C:\Program Files (x86)\Steam\steamapps\common\Bully Scholarship Edition\_derpy_script_loader\src\client\library\lib_content.c
; Line 21
	push	esi
; Line 22
	mov	esi, DWORD PTR _name$[esp]
	push	OFFSET ??_C@_07MCIBIGGD@ACT?4IMG@
	push	esi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN2@getContent
; Line 23
	xor	eax, eax
	pop	esi
; Line 35
	ret	0
$LN2@getContent:
; Line 24
	push	OFFSET ??_C@_08OBDINPEP@CUTS?4IMG@
	push	esi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN3@getContent
; Line 25
	mov	eax, 1
	pop	esi
; Line 35
	ret	0
$LN3@getContent:
; Line 26
	push	OFFSET ??_C@_0M@GIGDAHPH@TRIGGER?4IMG@
	push	esi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN4@getContent
; Line 27
	mov	eax, 2
	pop	esi
; Line 35
	ret	0
$LN4@getContent:
; Line 28
	push	OFFSET ??_C@_07BMEJHCGG@IDE?4IMG@
	push	esi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN5@getContent
; Line 29
	mov	eax, 3
	pop	esi
; Line 35
	ret	0
$LN5@getContent:
; Line 30
	push	OFFSET ??_C@_0M@BIIECIBD@SCRIPTS?4IMG@
	push	esi
	call	_dslisenum
	add	esp, 8
	test	eax, eax
	je	SHORT $LN6@getContent
; Line 31
	mov	eax, 4
	pop	esi
; Line 35
	ret	0
$LN6@getContent:
; Line 32
	push	OFFSET ??_C@_09BJGACECB@WORLD?4IMG@
	push	esi
	call	_dslisenum
	add	esp, 8
	neg	eax
	sbb	eax, eax
	and	eax, 6
	dec	eax
	pop	esi
; Line 35
	ret	0
_getContentIdentifier ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _RebuildArchives
_TEXT	SEGMENT
_lua$ = 8						; size = 4
_RebuildArchives PROC					; COMDAT
; File C:\Program Files (x86)\Steam\steamapps\common\Bully Scholarship Edition\_derpy_script_loader\src\client\library\lib_content.c
; Line 6
	push	esi
; Line 9
	push	1
	push	DWORD PTR _lua$[esp+4]
	call	_getDslState
	mov	esi, eax
; Line 10
	push	0
	push	OFFSET ??_C@_0BG@IEJFEJMI@allow_img_replacement@
	push	DWORD PTR [esi+8]
	call	_getConfigBooleanArray
	add	esp, 20					; 00000014H
	test	eax, eax
	je	$LN6@RebuildArc
; Line 12
	push	OFFSET ??_C@_0CD@JAEKCEEJ@_derpy_script_loader?1cache?1Act?4@
	push	OFFSET ??_C@_0M@NJIGANIF@Act?1Act?4img@
	push	0
	push	esi
	call	_makeArchiveWithContent
; Line 13
	push	OFFSET ??_C@_0CE@GJDINDKL@_derpy_script_loader?1cache?1Cuts@
	push	OFFSET ??_C@_0O@IOMPOKDP@Cuts?1Cuts?4img@
	push	1
	push	esi
	call	_makeArchiveWithContent
; Line 14
	push	OFFSET ??_C@_0CH@FPHBLACB@_derpy_script_loader?1cache?1Trig@
	push	OFFSET ??_C@_0BA@KLEHNHEH@DAT?1Trigger?4img@
	push	2
	push	esi
	call	_makeArchiveWithContent
; Line 15
	push	OFFSET ??_C@_0CD@LHPELCBK@_derpy_script_loader?1cache?1ide?4@
	push	OFFSET ??_C@_0BA@PPFHMAPH@Objects?1ide?4img@
	push	3
	push	esi
	call	_makeArchiveWithContent
	add	esp, 64					; 00000040H
; Line 16
	push	OFFSET ??_C@_0CH@CPJGJPMF@_derpy_script_loader?1cache?1Scri@
	push	OFFSET ??_C@_0BE@CGMMJKCJ@Scripts?1Scripts?4img@
	push	4
	push	esi
	call	_makeArchiveWithContent
; Line 17
	push	0
	push	OFFSET ??_C@_0BI@PPKKMKAK@allow_world_replacement@
	push	DWORD PTR [esi+8]
	call	_getConfigBooleanArray
	add	esp, 28					; 0000001cH
	test	eax, eax
	je	SHORT $LN6@RebuildArc
; Line 18
	push	OFFSET ??_C@_0CF@ONGGAMNM@_derpy_script_loader?1cache?1Worl@
	push	OFFSET ??_C@_0BB@EJOKGLAP@Stream?1World?4img@
	push	5
	push	esi
	call	_makeArchiveWithContent
	add	esp, 16					; 00000010H
$LN6@RebuildArc:
; Line 20
	xor	eax, eax
	pop	esi
	ret	0
_RebuildArchives ENDP
_TEXT	ENDS
END
